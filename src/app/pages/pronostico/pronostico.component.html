<div class="formulario-container" *ngIf="usuarioId">
  <header class="user-header">
    <h2>Hola, <span>{{ nombreUsuario }}</span></h2>
    <div class="puntos-card">
      <span class="label">Tus puntos</span>
      <span class="value">{{ puntos }}</span>
    </div>
  </header>

  <form (ngSubmit)="$event.preventDefault(); enviarPronostico()" class="pronostico-form">
    <div class="campo-grupo">
      <label class="label-principal">Selecciona el partido</label>
      <div class="select-wrapper">
        <select [(ngModel)]="partidoId" name="partidoId" required>
          <option value="">-- Elige un enfrentamiento --</option>
          <option *ngFor="let p of partidos" [value]="p.id">
            {{ p.local }} vs {{ p.visitante }}
          </option>
        </select>
      </div>
    </div>

    <div class="info-cierre" *ngIf="partidoSeleccionado">
      <span class="reloj-icon">⏰</span>
      Cierra: {{ partidoSeleccionado.fechaLimite.seconds * 1000 | date : "dd/MM, h:mm a" }}
    </div>

    <div class="versus-container">
      <div class="equipo">
        <label>{{ partidoSeleccionado?.local || "Local" }}</label>
        <input type="number" min="0" inputmode="numeric" pattern="[0-9]*" [(ngModel)]="golesLocal" name="golesLocal"
          placeholder="0" (focus)="$any($event.target).select()" required />
      </div>

      <div class="separador">VS</div>

      <div class="equipo">
        <label>{{ partidoSeleccionado?.visitante || "Visitante" }}</label>
        <input type="number" min="0" inputmode="numeric" pattern="[0-9]*" [(ngModel)]="golesVisitante"
          name="golesVisitante" placeholder="0" (focus)="$any($event.target).select()" required />
      </div>
    </div>

    <button type="submit" class="btn-enviar" [disabled]="golesLocal === null || golesVisitante === null">Enviar
      Pronóstico</button>
    <p *ngIf="mensaje" class="mensaje">{{ mensaje }}</p>
  </form>

  <section class="mis-pronosticos">
    <h3>Mis pronósticos</h3>
    <div class="tabla-wrapper">
      <table>
        <thead>
          <tr>
            <th>Partido</th>
            <th>L</th>
            <th>V</th>
            <th>Fecha</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let p of pronosticos">
            <td class="partido-nombre">{{ p.partidoId }}</td>
            <td class="goles">{{ p.golesLocal }}</td>
            <td class="goles">{{ p.golesVisitante }}</td>
            <td class="fecha-celda">{{ p.fechaHora | date : "dd/MM" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
</div>
